/*! For license information please see blog-grid-view-script.js.LICENSE.txt */
!function(){"use strict";var e={"./src/blocks/dynamic/blog-grid/scripts/helpers.js":function(e,t,o){o.r(t),o.d(t,{createErrorNode:function(){return n},createPostCardNode:function(){return r},getPosts:function(){return s}});const r=e=>{let t=document.createElement("div");return t.innerHTML=e,t.firstChild},n=e=>{let t=document.createElement("div");return t.className="blog-post-list__error-message",t.innerHTML=`<p>${e}</p>`,t},s=async({url:e,data:t,headers:o})=>{const r=await fetch(e,{method:"POST",headers:o,body:new URLSearchParams(t).toString()}),n=await r.json();return{posts:n.posts,postCount:n.post_count}}},"@wordpress/dom-ready":function(e){e.exports=window.wp.domReady},"@wordpress/i18n":function(e){e.exports=window.wp.i18n}},t={};function o(r){var n=t[r];if(void 0!==n)return n.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,o),s.exports}o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,{a:t}),t},o.d=function(e,t){for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};!function(){o.r(r);var e=o("@wordpress/dom-ready"),t=o.n(e),n=o("@wordpress/i18n"),s=o("./src/blocks/dynamic/blog-grid/scripts/helpers.js");t()((function(){let e={container:document.getElementById("blog-post-container"),list:document.getElementById("blog-post-list"),cards:document.querySelectorAll(".blog-grid__item"),loadMore:document.getElementById("blog-load-more")},t={postsLoaded:e.list.childElementCount},o={url:PHP_VARIABLES.ajax_url,data:{action:"load_more_posts",security:PHP_VARIABLES.ajax_nonce,paged:2},headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF-8"}};e.loadMore.addEventListener("click",(async()=>{try{const r=await(0,s.getPosts)(o);r.posts.forEach((o=>{e.list.append((0,s.createPostCardNode)(o.content)),t.postsLoaded++})),o.data.paged++,0==r.posts.length?console.info((0,n.__)("No more posts to fetch:","kotisivu-block-theme")):console.info((0,n.__)("Posts fetched succesfully:","kotisivu-block-theme"),r.posts),t.postsLoaded==r.postCount&&(e.loadMore.disabled=!0,e.loadMore.setAttribute("aria-disabled","true"))}catch(t){e.list.append((0,s.createErrorNode)((0,n.__)("Error while loading more posts","kotisivu-block-theme"))),console.error("Error:",t)}})),e.cards.forEach((e=>{e.addEventListener("click",(()=>{window.location.assign(e.dataset.url)}))}))}))}()}();
//# sourceMappingURL=blog-grid-view-script.js.map