/*! For license information please see reference-slider-view-script.js.LICENSE.txt */
!function(){"use strict";var e={"./src/blocks/dynamic/reference-slider/components/Slider.jsx":function(e,r,t){t.r(r);var n=t("@wordpress/element"),s=t("@wordpress/i18n"),c=t("./src/hooks/index.js"),i=t("./src/blocks/dynamic/reference-slider/icons/index.js"),l=t("./src/blocks/dynamic/reference-slider/scripts/helpers.js"),o=t("./src/blocks/dynamic/reference-slider/context/SliderContext.js");const a=({featured_image:e,logo:r,excerpt:t,name:c,link:o})=>(0,n.createElement)("div",{className:"reference-slider__slide"},(0,n.createElement)("div",{className:"reference-slider__image-container is-stacked"},(0,n.createElement)("img",{className:"reference-slider__image reference-slider__image--background",src:e.url,alt:e.alt,width:e.width,height:e.height}),(0,n.createElement)("img",{className:"reference-slider__image reference-slider__image--logo",src:r.url,alt:r.alt,width:r.width,height:r.height})),(0,n.createElement)("div",{className:"reference-slider__content-container"},(0,n.createElement)(i.Quote,{"aria-hidden":!0,className:"reference-slider__quote"}),(0,n.createElement)("div",{className:"reference-slider__content-wrapper"},(0,n.createElement)("p",{className:"reference-slider__excerpt"},(0,l.stripHTML)(t)),(0,n.createElement)("p",{className:"reference-slider__name"},c),(0,n.createElement)("div",{class:"references-slider__button wp-block-button"},(0,n.createElement)("a",{class:"wp-block-button__link wp-element-button",href:o},(0,s.__)("Explore","kotisivu-block-theme"))))));r.default=e=>{const r=(0,n.useRef)(null),{sliderIndex:t,setSliderIndex:s}=(0,n.useContext)(o.default),i=Object.keys(e),l=(0,c.useElementDimensions)(r),[d,u]=(0,n.useState)({x:null,locked:!1,offset:0,factor:0}),f=e=>e.changedTouches?e.changedTouches[0]:e;return(0,n.createElement)("div",{ref:r,className:"reference-slider__slides"+(d.locked?" is-smooth":""),style:{"--slide-count":i.length,"--slide-index":t,"--slide-offset":d.offset+"px","--slide-transition-factor":d.factor},onTouchStart:e=>(e=>{u({...d,x:f(e).clientX,locked:!0})})(e),onTouchEnd:r=>(r=>{if(!d.locked)return;let n=f(r).clientX-d.x,c=Math.sign(n),i=+(c*n/l.width).toFixed(2),o=Object.keys(e).length;(t>0||c<0)&&(t<o-1||c>0)&&i>.2&&(s((e=>c<0?e+1:c>0?e-1:void 0)),u({x:null,factor:1-i,offset:0,locked:!1}))})(r),onTouchMove:e=>(e=>{if(e.preventDefault(),d.locked){let r=Math.round(f(e).clientX-d.x);u({...d,offset:r})}})(e)},(0,n.createElement)("div",{className:"reference-slider__track"},i.map(((r,t)=>(0,n.createElement)(a,{key:t,...e[r].metadata.reference})))))}},"./src/blocks/dynamic/reference-slider/components/SliderControls.jsx":function(e,r,t){t.r(r);var n=t("@wordpress/element"),s=t("@wordpress/i18n"),c=t("./src/blocks/dynamic/reference-slider/context/SliderContext.js"),i=t("./src/blocks/dynamic/reference-slider/icons/index.js");r.default=({length:e})=>{const{sliderIndex:r,setSliderIndex:t}=(0,n.useContext)(c.default);(0,n.useEffect)((()=>{setInterval((()=>{l()}),2e3)}),[]);const l=()=>{t((r=>r===e-1?0:r+1))};return(0,n.createElement)("div",{className:"reference-slider__controls"},(0,n.createElement)("button",{onClick:()=>{t((r=>0===r?e-1:r-1))},className:"reference-slider__btn reference-slider__btn--prev","aria-label":(0,s.__)("View Previous Reference","kotisivu-block-theme")},(0,n.createElement)("span",{className:"is-visually-hidden"},(0,s.__)("Previous","kotisivu-block-theme")),(0,n.createElement)(i.ArrowLeft,{"aria-hidden":!0})),(0,n.createElement)("button",{onClick:l,className:"reference-slider__btn reference-slider__btn--next","aria-label":(0,s.__)("View Next Reference","kotisivu-block-theme")},(0,n.createElement)("span",{className:"is-visually-hidden"},(0,s.__)("Next","kotisivu-block-theme")),(0,n.createElement)(i.ArrowRight,{"aria-hidden":!0})))}},"./src/blocks/dynamic/reference-slider/components/SliderPagination.jsx":function(e,r,t){t.r(r);var n=t("@wordpress/element"),s=(t("@wordpress/i18n"),t("./src/blocks/dynamic/reference-slider/context/SliderContext.js")),c=t("./src/blocks/dynamic/reference-slider/icons/index.js");r.default=({data:e})=>{const{sliderIndex:r,setSliderIndex:t}=(0,n.useContext)(s.default);return(0,n.createElement)("div",{className:"reference-slider__pagination"},e.map(((e,s)=>(0,n.createElement)("button",{key:s,className:"reference-slider__pagination-btn","aria-label":`View Reference ${s+1}`,onClick:()=>t(s)},(0,n.createElement)("span",{className:"is-visually-hidden"},`View Reference ${s+1}`),s===r?(0,n.createElement)(c.CircleFilled,{"aria-hidden":!0}):(0,n.createElement)(c.CircleOutline,{"aria-hidden":!0})))))}},"./src/blocks/dynamic/reference-slider/context/SliderContext.js":function(e,r,t){t.r(r);var n=t("@wordpress/element");const s=(0,n.createContext)(null);r.default=s},"./src/blocks/dynamic/reference-slider/icons/index.js":function(e,r,t){t.r(r),t.d(r,{ArrowLeft:function(){return n.ArrowLeft},ArrowRight:function(){return s.ArrowRight},CircleFilled:function(){return i.CircleFilled},CircleOutline:function(){return l.CircleOutline},Quote:function(){return c.Quote}});var n=t("./src/blocks/dynamic/reference-slider/icons/lib/ArrowLeft.jsx"),s=t("./src/blocks/dynamic/reference-slider/icons/lib/ArrowRight.jsx"),c=t("./src/blocks/dynamic/reference-slider/icons/lib/Quote.jsx"),i=t("./src/blocks/dynamic/reference-slider/icons/lib/CircleFilled.jsx"),l=t("./src/blocks/dynamic/reference-slider/icons/lib/CircleOutline.jsx")},"./src/blocks/dynamic/reference-slider/icons/lib/ArrowLeft.jsx":function(e,r,t){t.r(r),t.d(r,{ArrowLeft:function(){return s}});var n=t("@wordpress/element");const s=e=>(0,n.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",style:{fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:2},viewBox:"0 0 1000 1000",...e},(0,n.createElement)("path",{d:"M500 0c275.958 0 500 224.042 500 500 0 275.958-224.042 500-500 500C224.042 1000 0 775.958 0 500 0 224.042 224.042 0 500 0Zm264 500L336 209.5v581L764 500Z",style:{fill:"var(--wp--preset--color--primary), black"},transform:"rotate(180 500 500)"}))},"./src/blocks/dynamic/reference-slider/icons/lib/ArrowRight.jsx":function(e,r,t){t.r(r),t.d(r,{ArrowRight:function(){return s}});var n=t("@wordpress/element");const s=e=>(0,n.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",style:{fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:2},viewBox:"0 0 1000 1000",...e},(0,n.createElement)("path",{d:"M500 0c275.958 0 500 224.042 500 500 0 275.958-224.042 500-500 500C224.042 1000 0 775.958 0 500 0 224.042 224.042 0 500 0Zm264 500L336 209.5v581L764 500Z",style:{fill:"var(--wp--preset--color--primary), black"}}))},"./src/blocks/dynamic/reference-slider/icons/lib/CircleFilled.jsx":function(e,r,t){t.r(r),t.d(r,{CircleFilled:function(){return s}});var n=t("@wordpress/element");const s=e=>(0,n.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",style:{fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:2},viewBox:"0 0 500 500",...e},(0,n.createElement)("circle",{fill:"var(--wp--preset--color--black)",cx:280,cy:276,r:220,transform:"translate(-68.182 -63.636) scale(1.13636)"}))},"./src/blocks/dynamic/reference-slider/icons/lib/CircleOutline.jsx":function(e,r,t){t.r(r),t.d(r,{CircleOutline:function(){return s}});var n=t("@wordpress/element");const s=e=>(0,n.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",style:{fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:2},viewBox:"0 0 500 500",...e},(0,n.createElement)("path",{d:"M249.999 0c137.978 0 250 112.021 250 249.999s-112.022 250-250 250-250-112.022-250-250 112.022-250 250-250Zm0 30c-121.421 0-220 98.578-220 219.999 0 121.421 98.579 220 220 220s220-98.579 220-220-98.579-220-220-220Z",fill:"var(--wp--preset--color--black)"}))},"./src/blocks/dynamic/reference-slider/icons/lib/Quote.jsx":function(e,r,t){t.r(r),t.d(r,{Quote:function(){return s}});var n=t("@wordpress/element");const s=e=>(0,n.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",style:{fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:2},width:"100%",height:"100%",viewBox:"0 0 615 576",...e},(0,n.createElement)("path",{d:"M0 0h256l-44 576H42L0 0ZM359 0h256l-44 576H401L359 0Z",fill:"var(--wp--preset--color--secondary)"}))},"./src/blocks/dynamic/reference-slider/scripts/helpers.js":function(e,r,t){t.r(r),t.d(r,{getReferences:function(){return c},stripHTML:function(){return i}});var n=t("@wordpress/api-fetch"),s=t.n(n);async function c(e=null){let r=new URL(window.location.origin+"/wp/v2/references");for(const[t,n]of Object.entries(e))r.searchParams.append(t,n);return await s()({path:r.pathname+r.search}).then((e=>e))}function i(e){var r=document.createElement("DIV");return r.innerHTML=e,r.textContent||r.innerText||""}},"./src/hooks/index.js":function(e,r,t){t.r(r),t.d(r,{useCustomPosts:function(){return c.useCustomPosts},useParentBlockAttributes:function(){return n.useParentBlockAttributes},usePosts:function(){return s.usePosts}});var n=t("./src/hooks/lib/useParentBlockAttributes.js"),s=t("./src/hooks/lib/usePosts.js"),c=t("./src/hooks/lib/useCustomPost.js")},"./src/hooks/lib/useCustomPost.js":function(e,r,t){t.r(r),t.d(r,{useCustomPosts:function(){return s}});var n=t("@wordpress/data");const s=(e=6,r)=>(0,n.useSelect)((t=>t("core").getEntityRecords("postType",r,{per_page:e})||[]))},"./src/hooks/lib/useParentBlockAttributes.js":function(e,r,t){t.r(r),t.d(r,{useParentBlockAttributes:function(){return s}});var n=t("@wordpress/data");const s=e=>(0,n.useSelect)((r=>{const{getBlockHierarchyRootClientId:t,getBlockAttributes:n}=r("core/block-editor");return n(t(e))}),[e])},"./src/hooks/lib/usePosts.js":function(e,r,t){t.r(r),t.d(r,{usePosts:function(){return s}});var n=t("@wordpress/data");const s=(e=6)=>(0,n.useSelect)((r=>r("core").getEntityRecords("postType","post",{per_page:e})||[]))},"@wordpress/api-fetch":function(e){e.exports=window.wp.apiFetch},"@wordpress/data":function(e){e.exports=window.wp.data},"@wordpress/dom-ready":function(e){e.exports=window.wp.domReady},"@wordpress/element":function(e){e.exports=window.wp.element},"@wordpress/i18n":function(e){e.exports=window.wp.i18n}},r={};function t(n){var s=r[n];if(void 0!==s)return s.exports;var c=r[n]={exports:{}};return e[n](c,c.exports,t),c.exports}t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,{a:r}),r},t.d=function(e,r){for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};!function(){t.r(n);var e=t("@wordpress/element"),r=t("@wordpress/i18n"),s=t("@wordpress/dom-ready"),c=t.n(s),i=t("./src/blocks/dynamic/reference-slider/scripts/helpers.js"),l=t("./src/blocks/dynamic/reference-slider/context/SliderContext.js"),o=t("./src/blocks/dynamic/reference-slider/components/SliderPagination.jsx"),a=t("./src/blocks/dynamic/reference-slider/components/SliderControls.jsx"),d=t("./src/blocks/dynamic/reference-slider/components/Slider.jsx");const u=()=>{const[t,n]=(0,e.useState)(0),[s,c]=(0,e.useState)([]);return(0,e.useEffect)((()=>{(async()=>{const e=await(0,i.getReferences)({per_page:10});c(e)})()}),[]),0===s.length?null:(0,e.createElement)(l.default.Provider,{value:{sliderIndex:t,setSliderIndex:n}},(0,e.createElement)("a",{href:"#skip-slider-controls",className:"is-visually-hidden"},(0,r.__)("Skip Slider Controls","kotisivu-block-theme")),(0,e.createElement)(d.default,{...s}),(0,e.createElement)(a.default,{length:s.length}),(0,e.createElement)(o.default,{data:s}),(0,e.createElement)("div",{id:"skip-slider-controls"}))};c()((async function(){(0,e.createRoot)(document.getElementById("reference-slider")).render((0,e.createElement)(u,null))}))}()}();
//# sourceMappingURL=reference-slider-view-script.js.map