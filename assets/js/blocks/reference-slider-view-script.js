!function(){"use strict";var e={n:function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,{a:r}),r},d:function(t,r){for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r:function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t);var r=window.wp.element,n=window.wp.i18n,l=window.wp.domReady,a=e.n(l),i=window.wp.apiFetch,s=e.n(i);var c=(0,r.createContext)(null);const o=e=>(0,r.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",style:{fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:2},viewBox:"0 0 1000 1000",...e},(0,r.createElement)("path",{d:"M500 0c275.958 0 500 224.042 500 500 0 275.958-224.042 500-500 500C224.042 1000 0 775.958 0 500 0 224.042 224.042 0 500 0Zm264 500L336 209.5v581L764 500Z",style:{fill:"var(--wp--preset--color--primary), black"},transform:"rotate(180 500 500)"})),d=e=>(0,r.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",style:{fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:2},viewBox:"0 0 1000 1000",...e},(0,r.createElement)("path",{d:"M500 0c275.958 0 500 224.042 500 500 0 275.958-224.042 500-500 500C224.042 1000 0 775.958 0 500 0 224.042 224.042 0 500 0Zm264 500L336 209.5v581L764 500Z",style:{fill:"var(--wp--preset--color--primary), black"}})),m=e=>(0,r.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",style:{fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:2},width:"100%",height:"100%",viewBox:"0 0 615 576",...e},(0,r.createElement)("path",{d:"M0 0h256l-44 576H42L0 0ZM359 0h256l-44 576H401L359 0Z",fill:"var(--wp--preset--color--secondary)"})),u=e=>(0,r.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",style:{fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:2},viewBox:"0 0 500 500",...e},(0,r.createElement)("circle",{fill:"var(--wp--preset--color--black)",cx:280,cy:276,r:220,transform:"translate(-68.182 -63.636) scale(1.13636)"})),f=e=>(0,r.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",style:{fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:2},viewBox:"0 0 500 500",...e},(0,r.createElement)("path",{d:"M249.999 0c137.978 0 250 112.021 250 249.999s-112.022 250-250 250-250-112.022-250-250 112.022-250 250-250Zm0 30c-121.421 0-220 98.578-220 219.999 0 121.421 98.579 220 220 220s220-98.579 220-220-98.579-220-220-220Z",fill:"var(--wp--preset--color--black)"}));var p=({data:e})=>{const{sliderIndex:t,setSliderIndex:n}=(0,r.useContext)(c);return(0,r.createElement)("div",{className:"reference-slider__pagination"},e.map(((e,l)=>(0,r.createElement)("button",{key:l,className:"reference-slider__pagination-btn","aria-label":`View Reference ${l+1}`,onClick:()=>n(l)},(0,r.createElement)("span",{className:"is-visually-hidden"},`View Reference ${l+1}`),l===t?(0,r.createElement)(u,{"aria-hidden":!0}):(0,r.createElement)(f,{"aria-hidden":!0})))))};var v=({length:e})=>{const{sliderIndex:t,setSliderIndex:l}=(0,r.useContext)(c);(0,r.useEffect)((()=>{setInterval((()=>{a()}),2e3)}),[]);const a=()=>{l((t=>t===e-1?0:t+1))};return(0,r.createElement)("div",{className:"reference-slider__controls"},(0,r.createElement)("button",{onClick:()=>{l((t=>0===t?e-1:t-1))},className:"reference-slider__btn reference-slider__btn--prev","aria-label":(0,n.__)("View Previous Reference","kotisivu-block-theme")},(0,r.createElement)("span",{className:"is-visually-hidden"},(0,n.__)("Previous","kotisivu-block-theme")),(0,r.createElement)(o,{"aria-hidden":!0})),(0,r.createElement)("button",{onClick:a,className:"reference-slider__btn reference-slider__btn--next","aria-label":(0,n.__)("View Next Reference","kotisivu-block-theme")},(0,r.createElement)("span",{className:"is-visually-hidden"},(0,n.__)("Next","kotisivu-block-theme")),(0,r.createElement)(d,{"aria-hidden":!0})))};window.wp.data;const h=({featured_image:e,logo:t,excerpt:l,name:a,link:i})=>{return(0,r.createElement)("div",{className:"reference-slider__slide"},(0,r.createElement)("div",{className:"reference-slider__image-container is-stacked"},(0,r.createElement)("img",{className:"reference-slider__image reference-slider__image--background",src:e.url,alt:e.alt,width:e.width,height:e.height}),(0,r.createElement)("img",{className:"reference-slider__image reference-slider__image--logo",src:t.url,alt:t.alt,width:t.width,height:t.height})),(0,r.createElement)("div",{className:"reference-slider__content-container"},(0,r.createElement)(m,{"aria-hidden":!0,className:"reference-slider__quote"}),(0,r.createElement)("div",{className:"reference-slider__content-wrapper"},(0,r.createElement)("p",{className:"reference-slider__excerpt"},(s=l,(c=document.createElement("DIV")).innerHTML=s,c.textContent||c.innerText||"")),(0,r.createElement)("p",{className:"reference-slider__name"},a),(0,r.createElement)("div",{class:"references-slider__button wp-block-button"},(0,r.createElement)("a",{class:"wp-block-button__link wp-element-button",href:i},(0,n.__)("Explore","kotisivu-block-theme"))))));var s,c};var w=e=>{const n=(0,r.useRef)(null),{sliderIndex:l,setSliderIndex:a}=(0,r.useContext)(c),i=Object.keys(e),s=(0,t.useElementDimensions)(n),[o,d]=(0,r.useState)({x:null,locked:!1,offset:0,factor:0}),m=e=>e.changedTouches?e.changedTouches[0]:e;return(0,r.createElement)("div",{ref:n,className:"reference-slider__slides"+(o.locked?" is-smooth":""),style:{"--slide-count":i.length,"--slide-index":l,"--slide-offset":o.offset+"px","--slide-transition-factor":o.factor},onTouchStart:e=>(e=>{d({...o,x:m(e).clientX,locked:!0})})(e),onTouchEnd:t=>(t=>{if(!o.locked)return;let r=m(t).clientX-o.x,n=Math.sign(r),i=+(n*r/s.width).toFixed(2),c=Object.keys(e).length;(l>0||n<0)&&(l<c-1||n>0)&&i>.2&&(a((e=>n<0?e+1:n>0?e-1:void 0)),d({x:null,factor:1-i,offset:0,locked:!1}))})(t),onTouchMove:e=>(e=>{if(e.preventDefault(),o.locked){let t=Math.round(m(e).clientX-o.x);d({...o,offset:t})}})(e)},(0,r.createElement)("div",{className:"reference-slider__track"},i.map(((t,n)=>(0,r.createElement)(h,{key:n,...e[t].metadata.reference})))))};const _=()=>{const[e,t]=(0,r.useState)(0),[l,a]=(0,r.useState)([]);return(0,r.useEffect)((()=>{(async()=>{const e=await async function(e=null){let t=new URL(window.location.origin+"/wp/v2/references");for(const[r,n]of Object.entries(e))t.searchParams.append(r,n);return await s()({path:t.pathname+t.search}).then((e=>e))}({per_page:10});a(e)})()}),[]),0===l.length?null:(0,r.createElement)(c.Provider,{value:{sliderIndex:e,setSliderIndex:t}},(0,r.createElement)("a",{href:"#skip-slider-controls",className:"is-visually-hidden"},(0,n.__)("Skip Slider Controls","kotisivu-block-theme")),(0,r.createElement)(w,{...l}),(0,r.createElement)(v,{length:l.length}),(0,r.createElement)(p,{data:l}),(0,r.createElement)("div",{id:"skip-slider-controls"}))};a()((async function(){(0,r.createRoot)(document.getElementById("reference-slider")).render((0,r.createElement)(_,null))}))}();