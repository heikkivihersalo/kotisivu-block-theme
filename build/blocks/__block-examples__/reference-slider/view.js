(()=>{"use strict";var e={n:t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return e.d(r,{a:r}),r},d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.React,r=window.wp.element,n=window.wp.i18n,l=window.wp.domReady;var a=e.n(l);const i=window.wp.apiFetch;var s=e.n(i);const c=(0,r.createContext)(null),o=e=>(0,t.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",style:{fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:2},viewBox:"0 0 1000 1000",...e},(0,t.createElement)("path",{d:"M500 0c275.958 0 500 224.042 500 500 0 275.958-224.042 500-500 500C224.042 1000 0 775.958 0 500 0 224.042 224.042 0 500 0Zm264 500L336 209.5v581L764 500Z",style:{fill:"var(--wp--preset--color--primary), black"},transform:"rotate(180 500 500)"})),d=e=>(0,t.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",style:{fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:2},viewBox:"0 0 1000 1000",...e},(0,t.createElement)("path",{d:"M500 0c275.958 0 500 224.042 500 500 0 275.958-224.042 500-500 500C224.042 1000 0 775.958 0 500 0 224.042 224.042 0 500 0Zm264 500L336 209.5v581L764 500Z",style:{fill:"var(--wp--preset--color--primary), black"}})),m=e=>(0,t.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",style:{fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:2},width:"100%",height:"100%",viewBox:"0 0 615 576",...e},(0,t.createElement)("path",{d:"M0 0h256l-44 576H42L0 0ZM359 0h256l-44 576H401L359 0Z",fill:"var(--wp--preset--color--secondary)"})),u=e=>(0,t.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",style:{fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:2},viewBox:"0 0 500 500",...e},(0,t.createElement)("circle",{fill:"var(--wp--preset--color--black)",cx:280,cy:276,r:220,transform:"translate(-68.182 -63.636) scale(1.13636)"})),f=e=>(0,t.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",style:{fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:2},viewBox:"0 0 500 500",...e},(0,t.createElement)("path",{d:"M249.999 0c137.978 0 250 112.021 250 249.999s-112.022 250-250 250-250-112.022-250-250 112.022-250 250-250Zm0 30c-121.421 0-220 98.578-220 219.999 0 121.421 98.579 220 220 220s220-98.579 220-220-98.579-220-220-220Z",fill:"var(--wp--preset--color--black)"})),p=({data:e})=>{const{sliderIndex:n,setSliderIndex:l}=(0,r.useContext)(c);return(0,t.createElement)("div",{className:"reference-slider__pagination"},e.map(((e,r)=>(0,t.createElement)("button",{key:r,className:"reference-slider__pagination-btn","aria-label":`View Reference ${r+1}`,onClick:()=>l(r)},(0,t.createElement)("span",{className:"is-visually-hidden"},`View Reference ${r+1}`),r===n?(0,t.createElement)(u,{"aria-hidden":!0}):(0,t.createElement)(f,{"aria-hidden":!0})))))},v=({length:e})=>{const{sliderIndex:l,setSliderIndex:a}=(0,r.useContext)(c);(0,r.useEffect)((()=>{setInterval((()=>{i()}),2e3)}),[]);const i=()=>{a((t=>t===e-1?0:t+1))};return(0,t.createElement)("div",{className:"reference-slider__controls"},(0,t.createElement)("button",{onClick:()=>{a((t=>0===t?e-1:t-1))},className:"reference-slider__btn reference-slider__btn--prev","aria-label":(0,n.__)("View Previous Reference","kotisivu-block-theme")},(0,t.createElement)("span",{className:"is-visually-hidden"},(0,n.__)("Previous","kotisivu-block-theme")),(0,t.createElement)(o,{"aria-hidden":!0})),(0,t.createElement)("button",{onClick:i,className:"reference-slider__btn reference-slider__btn--next","aria-label":(0,n.__)("View Next Reference","kotisivu-block-theme")},(0,t.createElement)("span",{className:"is-visually-hidden"},(0,n.__)("Next","kotisivu-block-theme")),(0,t.createElement)(d,{"aria-hidden":!0})))};window.wp.data;const w=({featured_image:e,logo:r,excerpt:l,name:a,link:i})=>{return(0,t.createElement)("div",{className:"reference-slider__slide"},(0,t.createElement)("div",{className:"reference-slider__image-container is-stacked"},(0,t.createElement)("img",{className:"reference-slider__image reference-slider__image--background",src:e.url,alt:e.alt,width:e.width,height:e.height}),(0,t.createElement)("img",{className:"reference-slider__image reference-slider__image--logo",src:r.url,alt:r.alt,width:r.width,height:r.height})),(0,t.createElement)("div",{className:"reference-slider__content-container"},(0,t.createElement)(m,{"aria-hidden":!0,className:"reference-slider__quote"}),(0,t.createElement)("div",{className:"reference-slider__content-wrapper"},(0,t.createElement)("p",{className:"reference-slider__excerpt"},(s=l,(c=document.createElement("DIV")).innerHTML=s,c.textContent||c.innerText||"")),(0,t.createElement)("p",{className:"reference-slider__name"},a),(0,t.createElement)("div",{class:"references-slider__button wp-block-button"},(0,t.createElement)("a",{class:"wp-block-button__link wp-element-button",href:i},(0,n.__)("Explore","kotisivu-block-theme"))))));var s,c},h=e=>{const n=(0,r.useRef)(null),{sliderIndex:l,setSliderIndex:a}=(0,r.useContext)(c),i=Object.keys(e),s=function(e){const[t,n]=(0,r.useState)();return(0,r.useLayoutEffect)((()=>{const t=()=>{n((e=>({width:e.current.offsetWidth,height:e.current.offsetHeight}))(e))};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)}),[]),t}(n),[o,d]=(0,r.useState)({x:null,locked:!1,offset:0,factor:0}),m=e=>e.changedTouches?e.changedTouches[0]:e;return(0,t.createElement)("div",{ref:n,className:"reference-slider__slides"+(o.locked?" is-smooth":""),style:{"--slide-count":i.length,"--slide-index":l,"--slide-offset":o.offset+"px","--slide-transition-factor":o.factor},onTouchStart:e=>(e=>{d({...o,x:m(e).clientX,locked:!0})})(e),onTouchEnd:t=>(t=>{if(!o.locked)return;let r=m(t).clientX-o.x,n=Math.sign(r),i=+(n*r/s.width).toFixed(2),c=Object.keys(e).length;(l>0||n<0)&&(l<c-1||n>0)&&i>.2&&(a((e=>n<0?e+1:n>0?e-1:void 0)),d({x:null,factor:1-i,offset:0,locked:!1}))})(t),onTouchMove:e=>(e=>{if(e.preventDefault(),o.locked){let t=Math.round(m(e).clientX-o.x);d({...o,offset:t})}})(e)},(0,t.createElement)("div",{className:"reference-slider__track"},i.map(((r,n)=>(0,t.createElement)(w,{key:n,...e[r].metadata.reference})))))},_=()=>{const[e,l]=(0,r.useState)(0),[a,i]=(0,r.useState)([]);return(0,r.useEffect)((()=>{(async()=>{const e=await async function(e=null){let t=new URL(window.location.origin+"/wp/v2/references");for(const[r,n]of Object.entries(e))t.searchParams.append(r,n);return await s()({path:t.pathname+t.search}).then((e=>e))}({per_page:10});i(e)})()}),[]),0===a.length?null:(0,t.createElement)(c.Provider,{value:{sliderIndex:e,setSliderIndex:l}},(0,t.createElement)("a",{href:"#skip-slider-controls",className:"is-visually-hidden"},(0,n.__)("Skip Slider Controls","kotisivu-block-theme")),(0,t.createElement)(h,{...a}),(0,t.createElement)(v,{length:a.length}),(0,t.createElement)(p,{data:a}),(0,t.createElement)("div",{id:"skip-slider-controls"}))};a()((async function(){(0,r.createRoot)(document.getElementById("reference-slider")).render((0,t.createElement)(_,null))}))})();