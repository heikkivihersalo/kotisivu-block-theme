<?php

/**
 * Get site logo content
 * @param mixed|array|bool $logo 
 * @param bool $isLink 
 * @param string 
 * @return string 
 */
function get_site_logo_dynamic_content(bool $is_link, string $company_name, string $class_name): string {
    /**
     * If logo is found, return logo either a link or as a div
     */
    $site_url = get_home_url();
    $href = $is_link ? 'href="' . $site_url . '"' : '';
    $aria_label = $is_link ? 'aria-label="' . __('Return back to homepage', 'kotisivu-block-theme') . '"' : '';

    ob_start();
?>
    <div class="site-header__logo">
        <a class="site-header__logo__link" <?php echo $href ?> aria-roledescription="logo" aria-label="<?php _e('Return back to homepage', 'kotisivu-block-theme'); ?>">
            <svg width="100%" height="100%" viewBox="0 0 565 83" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
                <g transform="matrix(1,0,0,1,-948,-2512)">
                    <g id="vihersalo-color" transform="matrix(1.00033,0,0,0.99982,-0.439064,0.520368)">
                        <rect x="948.126" y="2512.61" width="564.063" height="81.905" style="fill:none;" />
                        <clipPath id="_clip1">
                            <rect x="948.126" y="2512.61" width="564.063" height="81.905" />
                        </clipPath>
                        <g clip-path="url(#_clip1)">
                            <g transform="matrix(0.99967,0,0,1.00018,0.438918,-0.520461)">
                                <path d="M997.871,2593.31L975.588,2593.31L948.126,2532.97L968.241,2532.97L986.308,2575.73L987.513,2575.73L1005.7,2532.97L1025.45,2532.97L997.871,2593.31ZM1049.54,2593.31L1031.48,2593.31L1031.48,2532.97L1049.54,2532.97L1049.54,2593.31ZM1078.33,2593.31L1060.26,2593.31L1060.26,2512.61L1078.33,2512.61L1078.33,2551.4L1079.3,2551.4C1081.22,2541.16 1088.33,2531.76 1103.75,2531.76C1120.01,2531.76 1127.96,2542.36 1127.96,2556.34L1127.96,2593.31L1109.89,2593.31L1109.89,2561.76C1109.89,2551.64 1105.55,2548.03 1094.23,2548.03C1082.07,2548.03 1078.33,2552.96 1078.33,2563.08L1078.33,2593.31ZM1170.35,2594.52C1150.24,2594.52 1136.51,2584.64 1136.51,2563.2C1136.51,2543.93 1150.12,2531.76 1169.99,2531.76C1189.75,2531.76 1202.88,2542.12 1202.88,2561.03C1202.88,2563.2 1202.63,2564.77 1202.39,2566.82L1153.25,2566.82C1153.73,2576.09 1158.07,2580.06 1169.75,2580.06C1180.47,2580.06 1184.21,2577.29 1184.21,2572.11L1184.21,2570.91L1202.27,2570.91L1202.27,2572.24C1202.27,2585.36 1189.51,2594.52 1170.35,2594.52ZM1169.63,2545.86C1158.91,2545.86 1154.34,2549.47 1153.49,2557.3L1185.53,2557.3C1185.05,2549.35 1180.23,2545.86 1169.63,2545.86ZM1229.86,2593.31L1211.79,2593.31L1211.79,2532.97L1228.53,2532.97L1228.53,2548.99L1229.62,2548.99C1231.3,2539.23 1237.69,2531.76 1249.85,2531.76C1263.34,2531.76 1268.88,2541.04 1268.88,2552.84L1268.88,2562.84L1250.82,2562.84L1250.82,2556.58C1250.82,2549.95 1248.16,2547.06 1240.82,2547.06C1232.75,2547.06 1229.86,2550.8 1229.86,2558.38L1229.86,2593.31ZM1307.06,2594.52C1286.71,2594.52 1275.51,2586.57 1275.51,2572.6L1275.51,2572.24L1293.57,2572.24L1293.57,2573.32C1293.57,2578.74 1296.95,2580.18 1307.18,2580.18C1316.82,2580.18 1319.11,2578.62 1319.11,2575.01C1319.11,2571.63 1317.3,2570.67 1310.2,2569.7L1293.21,2567.66C1281.17,2566.33 1274.42,2560.91 1274.42,2550.8C1274.42,2540.2 1283.46,2531.76 1304.17,2531.76C1323.93,2531.76 1335.13,2539.23 1335.13,2553.93L1335.13,2554.29L1317.06,2554.29L1317.06,2553.57C1317.06,2548.63 1314.65,2546.1 1303.57,2546.1C1294.54,2546.1 1292.25,2547.66 1292.25,2551.52C1292.25,2554.65 1293.93,2555.97 1301.88,2556.94L1314.77,2558.5C1330.91,2560.31 1336.94,2565.73 1336.94,2575.73C1336.94,2587.05 1325.73,2594.52 1307.06,2594.52ZM1364.04,2594.52C1351.03,2594.52 1343.2,2588.49 1343.2,2578.38C1343.2,2569.46 1349.82,2563.92 1362.71,2562.6L1388.61,2559.95L1388.61,2557.66C1388.61,2549.83 1385.12,2547.66 1375.48,2547.66C1366.33,2547.66 1362.59,2550.07 1362.59,2556.94L1362.59,2557.42L1344.4,2557.42L1344.4,2557.06C1344.4,2542.12 1356.93,2531.76 1376.8,2531.76C1396.92,2531.76 1406.43,2542.12 1406.43,2557.9L1406.43,2593.31L1389.57,2593.31L1389.57,2579.46L1388.61,2579.46C1385.84,2588.86 1377.41,2594.52 1364.04,2594.52ZM1361.39,2577.17C1361.39,2580.43 1363.92,2581.75 1369.22,2581.75C1381.5,2581.75 1388.13,2578.86 1388.61,2570.31L1367.65,2572.72C1363.31,2573.08 1361.39,2574.28 1361.39,2577.17ZM1434.86,2593.31L1416.79,2593.31L1416.79,2512.61L1434.86,2512.61L1434.86,2593.31ZM1477.74,2594.52C1457.14,2594.52 1443.29,2582.23 1443.29,2563.2C1443.29,2543.93 1457.14,2531.76 1477.74,2531.76C1498.34,2531.76 1512.19,2543.93 1512.19,2563.2C1512.19,2582.23 1498.34,2594.52 1477.74,2594.52ZM1477.74,2578.5C1489.91,2578.5 1494.24,2573.8 1494.24,2563.2C1494.24,2552.6 1489.91,2547.66 1477.74,2547.66C1465.45,2547.66 1461.24,2552.6 1461.24,2563.2C1461.24,2573.8 1465.45,2578.5 1477.74,2578.5Z" style="fill:var(--_color);" />
                            </g>
                            <g transform="matrix(0.99967,0,0,1.00018,0.438918,-0.520461)">
                                <path d="M1034.81,2512.61L1034.81,2530.67L1031.18,2530.67L1031.18,2512.61L1034.81,2512.61ZM1044.44,2516.77L1044.44,2530.67L1040.81,2530.67L1040.81,2516.77L1044.44,2516.77ZM1049.25,2518.85L1049.25,2530.67L1045.62,2530.67L1045.62,2518.85L1049.25,2518.85ZM1039.64,2521.91L1039.64,2530.67L1036.01,2530.67L1036.01,2521.91L1039.64,2521.91Z" style="fill:var(--wp--preset--color--primary);" />
                            </g>
                        </g>
                    </g>
                </g>
            </svg>
            <span class="is-visually-hidden"><?php echo $company_name; ?></span>
        </a>
    </div>
    <?php return ob_get_clean(); ?>
<?php
}

/**
 * PHP file to use when rendering the block type on the server to show on the front end.
 *
 * The following variables are exposed to the file:
 *     $attributes (array): The block attributes.
 *     $content (string): The block default content.
 *     $block (WP_Block): The block instance.
 *
 * @see https://github.com/WordPress/gutenberg/blob/trunk/docs/reference-guides/block-api/block-metadata.md#render
 */

$isLink = isset($attributes['isLink']) ? $attributes['isLink'] : false;
$className = isset($attributes['className']) ? $attributes['className'] : "";
$companyName = isset($attributes["options"]['contact-company-name']) ? $attributes["options"]['contact-company-name'] : get_bloginfo('name');

echo get_site_logo_dynamic_content($isLink, $companyName, $className);
